{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,uCAMAC,EAAAC,KAAKC,KAAKC,iBAAiB,UA0C3B,SAAsBC,GACpBA,EAAMC,iBAEN,MAAMC,EAAaF,EAAMG,OAAOC,SAASC,YAAYC,MAErD,IAAKJ,EAAWK,QAAUL,IAAeM,EACvC,OAAOd,EAAAe,OAAOC,QAAQ,oCAExBF,EAAcN,EACdS,EAAa,EAEbf,EAAAC,KAAKe,QAAQC,UAAY,GAEzBC,EAAUN,EAAaG,GAEvBf,EAAAC,KAAKC,KAAKiB,O,IAvDZ,IACIJ,EADAH,EAAc,GAGlBQ,eAAeF,EAAUG,EAAGC,GAC1B,IACE,MAAMC,QAAa,EAAAC,EAAAC,kBAAiBJ,EAAGC,GAIvC,GAHAI,QAAQC,IAAIJ,EAAKK,MACjBF,QAAQC,IAAIJ,IAEPA,EAAKM,UAIR,YAHA/B,EAAAe,OAAOiB,QACL,6EAKJ,EAAAC,EAAAC,cAAaT,EAAKK,MAElB,MAAMK,EAAWC,KAAKC,KAAKZ,EAAKM,UAAY,IAExCd,GAAckB,GAChBjC,EAAAC,KAAKmC,YAAYC,UAAUC,IAAI,aAC/BxC,EAAAe,OAAO0B,KAAK,+DAEZvC,EAAAC,KAAKmC,YAAYC,UAAUG,OAAO,Y,CAEpC,MAAOC,GACPf,QAAQC,IAAIc,GACZ3C,EAAAe,OAAOiB,QAAQ,oD,EAInB9B,EAAAC,KAAKmC,YAAYjC,iBAAiB,SAElC,WACEY,GAAc,EACdf,EAAAC,KAAKmC,YAAYC,UAAUC,IAAI,aAC/BpB,EAAUN,EAAaG,E","sources":["src/js/01-load-more-btn.js"],"sourcesContent":["import { Notify } from 'notiflix';\n\nimport { fetchPixabayData } from './pixabay-api';\nimport { createMarkup } from './01-markup';\nimport { refs } from './refs';\n\nrefs.form.addEventListener('submit', onFormSubmit);\n\nlet searchQuery = '';\nlet searchPage;\n\nasync function getImages(q, pages) {\n  try {\n    const data = await fetchPixabayData(q, pages);\n    console.log(data.hits);\n    console.log(data);\n\n    if (!data.totalHits) {\n      Notify.failure(\n        'Sorry, there are no images matching your search query. Please try again.'\n      );\n      return;\n    }\n\n    createMarkup(data.hits);\n\n    const lastPage = Math.ceil(data.totalHits / 40);\n\n    if (searchPage >= lastPage) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      Notify.info(`We're sorry, but you've reached the end of search results.`);\n    } else {\n      refs.loadMoreBtn.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n    Notify.failure(`Ooops... Something goes wrong. Please, try again.`);\n  }\n}\n\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\n\nfunction onLoadMoreBtnClick() {\n  searchPage += 1;\n  refs.loadMoreBtn.classList.add('is-hidden');\n  getImages(searchQuery, searchPage);\n}\n\nfunction onFormSubmit(event) {\n  event.preventDefault();\n\n  const inputValue = event.target.elements.searchQuery.value;\n\n  if (!inputValue.trim() || inputValue === searchQuery)\n    return Notify.warning('Please enter something to search');\n\n  searchQuery = inputValue;\n  searchPage = 1;\n\n  refs.gallery.innerHTML = '';\n\n  getImages(searchQuery, searchPage);\n\n  refs.form.reset();\n}\n"],"names":["$7Y9D8","parcelRequire","$krGWQ","refs","form","addEventListener","event","preventDefault","inputValue","target","elements","searchQuery","value","trim","$a395ce79629ffdfe$var$searchQuery","Notify","warning","$a395ce79629ffdfe$var$searchPage","gallery","innerHTML","$a395ce79629ffdfe$var$getImages","reset","async","q","pages","data","$6fOXY","fetchPixabayData","console","log","hits","totalHits","failure","$7ec8E","createMarkup","lastPage","Math","ceil","loadMoreBtn","classList","add","info","remove","error"],"version":3,"file":"01-load-more.fe2a2d64.js.map"}